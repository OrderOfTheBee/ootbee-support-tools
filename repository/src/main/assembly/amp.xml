<?xml version='1.0' encoding='UTF-8'?>
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.3 http://maven.apache.org/xsd/assembly-1.1.3.xsd">
    <id>amp</id>
    <formats>
        <format>amp</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    
    <!-- 
        divergences from SDK 4 default:
        - handle only file-mapping.properties/module.properties individually
        - keep all config as plain files
        - keep all web artifacts as plain files
        - use classes JAR instead of "simple module" JAR
    -->
    <files>
        <file>
            <source>src/main/assembly/file-mapping.properties</source>
            <filtered>true</filtered>
        </file>
        <file>
            <source>src/main/resources/alfresco/module/ootbee-${project.artifactId}/module.properties</source>
            <filtered>true</filtered>
        </file>
        <file>
            <source>${project.basedir}/target/${project.build.finalName}-classes.jar</source>
            <outputDirectory>lib</outputDirectory>
        </file>
    </files>
    <fileSets>
        <fileSet>
            <directory>${project.basedir}/src/main/resources/META-INF/resources</directory>
            <outputDirectory>web</outputDirectory>
            <filtered>false</filtered>
            <excludes>
                <exclude>**/.jshintrc</exclude>
                <exclude>**/.jshintignore</exclude>
                <exclude>**/.eslintrc.json</exclude>
            </excludes>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/resources/alfresco</directory>
            <outputDirectory>config/alfresco</outputDirectory>
            <!-- maven-assembly-plugin does not use nonFilteredFileExtension of maven-resources-plugin, so this duplicates that config -->
            <excludes>
                <exclude>*.ftl</exclude>
                <exclude>*.js</exclude>
                <exclude>*.css</exclude>
                <exclude>*.jpg</exclude>
                <exclude>*.png</exclude>
                <exclude>*.gif</exclude>
                <exclude>*.ico</exclude>
                <exclude>*.svg</exclude>
                <exclude>*.bin</exclude>
                <exclude>*.exe</exclude>
                <exclude>*.lic</exclude>
                <exclude>*.acp</exclude>
                <exclude>*.zip</exclude>
                <exclude>*.jar</exclude>
                <exclude>*.keystore</exclude>
                <exclude>*.pdf</exclude>
                <exclude>*.swf</exclude>
                <exclude>*.doc</exclude>
                <exclude>*.docx</exclude>
                <exclude>*.xls</exclude>
                <exclude>*.xlsx</exclude>
                <exclude>*.ppt</exclude>
                <exclude>*.pptx</exclude>
                <exclude>*.msg</exclude>
                <exclude>*.ttf</exclude>
                <exclude>*.eot</exclude>
                <exclude>*.woff</exclude>
                <exclude>*.woff2</exclude>
                <exclude>**/ootbee-${project.artifactId}/module.properties</exclude>
            </excludes>
            <filtered>true</filtered>
        </fileSet>
        <!-- the inverse, non-filtered variant of previous fileSet -->
        <fileSet>
            <directory>${project.basedir}/src/main/resources/alfresco</directory>
            <outputDirectory>config/alfresco</outputDirectory>
            <includes>
                <include>*.ftl</include>
                <include>*.js</include>
                <include>*.css</include>
                <include>*.jpg</include>
                <include>*.png</include>
                <include>*.gif</include>
                <include>*.ico</include>
                <include>*.svg</include>
                <include>*.bin</include>
                <include>*.exe</include>
                <include>*.lic</include>
                <include>*.acp</include>
                <include>*.zip</include>
                <include>*.jar</include>
                <include>*.keystore</include>
                <include>*.pdf</include>
                <include>*.swf</include>
                <include>*.doc</include>
                <include>*.docx</include>
                <include>*.xls</include>
                <include>*.xlsx</include>
                <include>*.ppt</include>
                <include>*.pptx</include>
                <include>*.msg</include>
                <include>*.ttf</include>
                <include>*.eot</include>
                <include>*.woff</include>
                <include>*.woff2</include>
            </includes>
            <filtered>false</filtered>
        </fileSet>
        <fileSet>
            <directory>${project.basedir}/src/main/resources/org</directory>
            <outputDirectory>config/org</outputDirectory>
            <includes>
                <include>springframework/*.xml</include>
                <include>springframework/**/*.xml</include>
            </includes>
            <filtered>true</filtered>
        </fileSet>
    </fileSets>
    <dependencySets>
        <dependencySet>
            <outputDirectory>lib</outputDirectory>
            <useProjectArtifact>false</useProjectArtifact>
            <useProjectAttachments>false</useProjectAttachments>
        </dependencySet>
    </dependencySets>
</assembly>